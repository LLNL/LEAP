<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Preprocessing Algorithms &mdash; LEAP v1.4 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="PyTorch Neural Network Interface (leaptorch)" href="leaptorch.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            LEAP
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="leapctype.html">Python API (leapctype)</a></li>
<li class="toctree-l1"><a class="reference internal" href="leaptorch.html">PyTorch Neural Network Interface (leaptorch)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Preprocessing Algorithms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#preprocessing_algorithms.makeAttenuationRadiographs"><code class="docutils literal notranslate"><span class="pre">makeAttenuationRadiographs()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#preprocessing_algorithms.outlierCorrection"><code class="docutils literal notranslate"><span class="pre">outlierCorrection()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#preprocessing_algorithms.outlierCorrection_highEnergy"><code class="docutils literal notranslate"><span class="pre">outlierCorrection_highEnergy()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#preprocessing_algorithms.detectorDeblur_FourierDeconv"><code class="docutils literal notranslate"><span class="pre">detectorDeblur_FourierDeconv()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#preprocessing_algorithms.detectorDeblur_RichardsonLucy"><code class="docutils literal notranslate"><span class="pre">detectorDeblur_RichardsonLucy()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#preprocessing_algorithms.ringRemoval_fast"><code class="docutils literal notranslate"><span class="pre">ringRemoval_fast()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#preprocessing_algorithms.ringRemoval"><code class="docutils literal notranslate"><span class="pre">ringRemoval()</span></code></a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">LEAP</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Preprocessing Algorithms</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/preprocessing_algorithms.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="preprocessing-algorithms">
<h1>Preprocessing Algorithms<a class="headerlink" href="#preprocessing-algorithms" title="Permalink to this heading"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="preprocessing_algorithms.makeAttenuationRadiographs">
<span class="sig-prename descclassname"><span class="pre">preprocessing_algorithms.</span></span><span class="sig-name descname"><span class="pre">makeAttenuationRadiographs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">air_scan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dark_scan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ROI</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#preprocessing_algorithms.makeAttenuationRadiographs" title="Permalink to this definition"></a></dt>
<dd><p>Converts data to attenuation radiographs (flat fielding and negative log)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> (<em>C contiguous float32 numpy array</em><em> or </em><em>torch tensor</em>) – radiograph data</p></li>
<li><p><strong>air_scan</strong> (<em>C contiguous float32 numpy array</em><em> or </em><em>torch tensor</em>) – air scan radiograph data</p></li>
<li><p><strong>dark_scan</strong> (<em>C contiguous float32 numpy array</em><em> or </em><em>torch tensor</em>) – dark scan radiograph data</p></li>
<li><p><strong>ROI</strong> (<em>4-element integer array</em>) – specifies a bounding box for which to estimate a mean value for flux correction</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="preprocessing_algorithms.outlierCorrection">
<span class="sig-prename descclassname"><span class="pre">preprocessing_algorithms.</span></span><span class="sig-name descname"><span class="pre">outlierCorrection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leapct</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.03</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">windowSize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isAttenuationData</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#preprocessing_algorithms.outlierCorrection" title="Permalink to this definition"></a></dt>
<dd><p>Removes outliers (zingers) from CT projections</p>
<p>Assumes the input data is in attenuation space.
No LEAP parameters need to be set for this function to work
and can be applied to any CT geometry type.
This algorithm processes each projection independently
and removes outliers by a thresholded median filter</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>leapct</strong> (<em>tomographicModels object</em>) – This is just needed to access LEAP algorithms</p></li>
<li><p><strong>g</strong> (<em>contiguous float32 numpy array</em><em> or </em><em>torch tensor</em>) – attenuation or transmission projection data</p></li>
<li><p><strong>threshold</strong> (<em>float</em>) – A pixel will be replaced by the median of its neighbors if <a href="#id1"><span class="problematic" id="id2">|g - median(g)|</span></a>/median(g) &gt; threshold</p></li>
<li><p><strong>windowSize</strong> (<em>int</em>) – The window size of the median filter applied is windowSize x windowSize</p></li>
<li><p><strong>isAttenuationData</strong> (<em>bool</em>) – True if g is attenuation data, False otherwise</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The corrected data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="preprocessing_algorithms.outlierCorrection_highEnergy">
<span class="sig-prename descclassname"><span class="pre">preprocessing_algorithms.</span></span><span class="sig-name descname"><span class="pre">outlierCorrection_highEnergy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leapct</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isAttenuationData</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#preprocessing_algorithms.outlierCorrection_highEnergy" title="Permalink to this definition"></a></dt>
<dd><p>Removes outliers (zingers) from CT projections</p>
<p>Assumes the input data is in attenuation space.
No LEAP parameters need to be set for this function to work
and can be applied to any CT geometry type.
This algorithm processes each projection independently
and removes outliers by a series of three thresholded median filters</p>
<p>This outlier correction algorithm should most be used for MV CT or neutron CT
where outliers effect a larger neighborhood of pixels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>leapct</strong> (<em>tomographicModels object</em>) – This is just needed to access LEAP algorithms</p></li>
<li><p><strong>g</strong> (<em>contiguous float32 numpy array</em><em> or </em><em>torch tensor</em>) – attenuation or transmission projection data</p></li>
<li><p><strong>isAttenuationData</strong> (<em>bool</em>) – True if g is attenuation data, False otherwise</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The corrected data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="preprocessing_algorithms.detectorDeblur_FourierDeconv">
<span class="sig-prename descclassname"><span class="pre">preprocessing_algorithms.</span></span><span class="sig-name descname"><span class="pre">detectorDeblur_FourierDeconv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leapct</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">H</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">WienerParam</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isAttenuationData</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#preprocessing_algorithms.detectorDeblur_FourierDeconv" title="Permalink to this definition"></a></dt>
<dd><p>Removes detector blur by fourier deconvolution</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> (<em>contiguous float32 numpy array</em><em> or </em><em>torch tensor</em>) – attenuation or transmission projection data</p></li>
<li><p><strong>H</strong> (<em>contiguous float32 numpy array</em><em> or </em><em>torch tensor</em>) – Magnitude of the frequency response of blurring psf, DC is at [0,0]</p></li>
<li><p><strong>WienerParam</strong> (<em>float</em>) – Parameter for Wiener deconvolution, number should be between 0.0 and 1.0</p></li>
<li><p><strong>isAttenuationData</strong> (<em>bool</em>) – True if g is attenuation data, False otherwise</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="preprocessing_algorithms.detectorDeblur_RichardsonLucy">
<span class="sig-prename descclassname"><span class="pre">preprocessing_algorithms.</span></span><span class="sig-name descname"><span class="pre">detectorDeblur_RichardsonLucy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leapct</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">H</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numIter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isAttenuationData</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#preprocessing_algorithms.detectorDeblur_RichardsonLucy" title="Permalink to this definition"></a></dt>
<dd><p>Removes detector blur by Richardson-Lucy iterative deconvolution</p>
<p>Richardson-Lucy iterative deconvolution is developed for Poisson-distributed data
and inherently preserve the non-negativity of the input</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> (<em>contiguous float32 numpy array</em><em> or </em><em>torch tensor</em>) – attenuation or transmission projection data</p></li>
<li><p><strong>H</strong> (<em>contiguous float32 numpy array</em><em> or </em><em>torch tensor</em>) – Magnitude of the frequency response of blurring psf, DC is at [0,0]</p></li>
<li><p><strong>numIter</strong> (<em>int</em>) – Number of iterations</p></li>
<li><p><strong>isAttenuationData</strong> (<em>bool</em>) – True if g is attenuation data, False otherwise</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="preprocessing_algorithms.ringRemoval_fast">
<span class="sig-prename descclassname"><span class="pre">preprocessing_algorithms.</span></span><span class="sig-name descname"><span class="pre">ringRemoval_fast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leapct</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numIter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxChange</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#preprocessing_algorithms.ringRemoval_fast" title="Permalink to this definition"></a></dt>
<dd><p>Removes detector pixel-to-pixel gain variations that cause ring artifacts in reconstructed images</p>
<p>Assumes the input data is in attenuation space.
No LEAP parameters need to be set for this function to work
and can be applied to any CT geometry type.
This algorithm is effective at removing ring artifacts and runs fast, but can
sometimes create new rings of tangents of sharp transitions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>leapct</strong> (<em>tomographicModels object</em>) – This is just needed to access LEAP algorithms</p></li>
<li><p><strong>g</strong> (<em>contiguous float32 numpy array</em><em> or </em><em>torch tensor</em>) – attenuation projection data</p></li>
<li><p><strong>delta</strong> (<em>float</em>) – The delta parameter of the Total Variation Functional</p></li>
<li><p><strong>numIter</strong> (<em>int</em>) – Number of iterations</p></li>
<li><p><strong>maxChange</strong> (<em>float</em>) – An upper limit on the maximum difference that can be applied to a detector pixels</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The corrected data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="preprocessing_algorithms.ringRemoval">
<span class="sig-prename descclassname"><span class="pre">preprocessing_algorithms.</span></span><span class="sig-name descname"><span class="pre">ringRemoval</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">leapct</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numIter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#preprocessing_algorithms.ringRemoval" title="Permalink to this definition"></a></dt>
<dd><p>Removes detector pixel-to-pixel gain variations that cause ring artifacts in reconstructed images</p>
<p>Assumes the input data is in attenuation space.
No LEAP parameters need to be set for this function to work
and can be applied to any CT geometry type.
This algorithm is effective at removing ring artifacts without creating new ring artifacts,
but is computationally expensive.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>leapct</strong> (<em>tomographicModels object</em>) – This is just needed to access LEAP algorithms</p></li>
<li><p><strong>g</strong> (<em>contiguous float32 numpy array</em><em> or </em><em>torch tensor</em>) – attenuation projection data</p></li>
<li><p><strong>delta</strong> (<em>float</em>) – The delta parameter of the Total Variation Functional</p></li>
<li><p><strong>beta</strong> (<em>float</em>) – The strength of the regularization</p></li>
<li><p><strong>numIter</strong> (<em>int</em>) – Number of iterations</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The corrected data</p>
</dd>
</dl>
</dd></dl>

</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="leaptorch.html" class="btn btn-neutral float-left" title="PyTorch Neural Network Interface (leaptorch)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Kyle Champley and Hyojin Kim.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>